<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive 3D Rubik's Cube</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #0f0c29; /* fallback for old browsers */
            background: -webkit-linear-gradient(to right, #24243e, #302b63, #0f0c29);
            background: linear-gradient(to right, #24243e, #302b63, #0f0c29);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #fff;
        }

        #main-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        #cube-section {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            min-width: 400px;
        }

        #container {
            width: 400px;
            height: 400px;
            position: relative;
        }

        #info-section {
            flex: 1;
            padding: 0 40px;
            max-width: 600px;
        }

        #controls {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        h3 {
            margin-top: 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 10px;
        }

        button {
            background: linear-gradient(45deg, #fe6b8b 30%, #ff8e53 90%);
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 5px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
        }

        #status {
            margin-top: 15px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            font-weight: bold;
            text-align: center;
        }

        #content {
            padding: 50px;
            max-width: 800px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.2);
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            border-bottom: 2px solid #ff8e53;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .section p {
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div id="main-wrapper">
        <div id="cube-section">
            <div id="container"></div>
            <div id="controls">
                <h3>Rubik's Cube Controller</h3>
                <button id="shuffleBtn">ðŸ”€ Shuffle Cube</button>
                <button id="solveBtn">âœ¨ Solve Cube</button>
                <div id="status">Ready to play!</div>
            </div>
        </div>
        <div id="info-section">
            <div class="section">
                <h2>The Algorithm</h2>
                <p>The solver uses the Kociemba algorithm, a two-phase algorithm that finds near-optimal solutions for the Rubik's Cube. It first solves the cube into a state where only moves of U, D, R2, L2, F2, B2 are needed, and then solves the remaining state.</p>
            </div>
            <div class="section">
                <h2>Our Approach</h2>
                <p>We implemented a 3D representation of the cube using Three.js. The cube's state is managed on the backend with a Python server using Flask. When the user requests a solve, the current state string is sent to the backend, which uses the `pykociemba` library to find a solution. The solution is then sent back to the frontend to be animated.</p>
            </div>
            <div class="section">
                <h2>Hurdles Faced</h2>
                <p>One of the main challenges was correctly mapping the 3D cube's visual state to the 1D string representation required by the Kociemba algorithm. Ensuring the rotations in the 3D animation and the state string remained synchronized was also a complex task that required careful state management on both the client and server.</p>
            </div>
            <div class="section">
                <h2>Cube Representation</h2>
                <p>The cube is represented as a 54-character string, with each character corresponding to a color on a facelet. The order of the faces in the string is Up, Right, Front, Down, Left, Back (U, R, F, D, L, B).</p>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="{{ url_for('static', filename='cube.js') }}"></script>
    <script>
    // Initialize the cube when the page loads
    let cube;
    window.addEventListener('DOMContentLoaded', () => {
        cube = new RubiksCube();
    });
    </script>
</body>
</html>
